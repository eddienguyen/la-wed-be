# ================================
# ENVIRONMENT CONFIGURATION
# ================================

# Environment (development | production)
NODE_ENV=development
PORT=3000

# ================================
# DATABASE (SUPABASE)
# ================================

# Database name
POSTGRES_DB=wedding-guest-management

# Connection pooling URL (Transaction mode - port 6543)
# Get from: Supabase Dashboard → Settings → Database → Connection string → Transaction mode
# NOTE: Add ?pgbouncer=true if using transaction mode to prevent "prepared statement already exists" errors
# The app will auto-detect port 6543 and add this parameter
DATABASE_URL=postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-1-[REGION].pooler.supabase.com:6543/postgres

# Direct connection URL (Session mode - port 5432)
# Get from: Supabase Dashboard → Settings → Database → Connection string → Session mode
DIRECT_URL=postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-1-[REGION].pooler.supabase.com:5432/postgres

# Supabase API URL
# Get from: Supabase Dashboard → Settings → API → Project URL
SUPABASE_URL=https://[PROJECT_REF].supabase.com

# ================================
# CORS CONFIGURATION
# ================================

# Allowed frontend origin
# Development: http://localhost:5173
# Production: https://your-domain.com
CORS_ORIGIN=http://localhost:5173

# ================================
# LOGGING
# ================================

# Log level (debug | info | warn | error)
LOG_LEVEL=debug

# fly.io
# Production database from Fly.io
CONNECTION_STRING=postgres://postgres:PASSWORD@wedding-db.flycast:5432/postgres

# ========================================
# Gallery Media Configuration
# ========================================

# Image processing limits
GALLERY_MAX_IMAGE_SIZE=10485760
GALLERY_IMAGE_QUALITY=85
GALLERY_WEBP_QUALITY=80

# Image variant sizes (in pixels)
GALLERY_THUMBNAIL_SIZE=400
GALLERY_MEDIUM_SIZE=800
GALLERY_LARGE_SIZE=1200

# Video processing limits
GALLERY_MAX_VIDEO_SIZE=104857600
GALLERY_VIDEO_THUMBNAIL_TIME=1

# Cleanup configuration
GALLERY_CLEANUP_INTERVAL=86400
GALLERY_CLEANUP_RETENTION_DAYS=30
GALLERY_CLEANUP_ENABLED=true